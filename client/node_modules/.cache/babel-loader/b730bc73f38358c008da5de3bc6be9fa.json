{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dalan\\\\DemoDownload\\\\project3\\\\client\\\\src\\\\components\\\\game.js\";\nimport React from \"react\";\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport moment from 'moment';\nimport Axios from \"axios\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from \"react-bootstrap/Form\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport { BrowserRouter } from 'react-router-dom';\n\nclass GamePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bid: {},\n      bidamount: undefined,\n      isLoaded: false,\n      credits: null,\n      currentBid: {},\n      loggedIn: undefined\n    };\n  }\n\n  componentDidMount() {\n    this.getUser();\n    var retrievedObject = localStorage.getItem(\"userObject\");\n    console.log(\"retrievedObject\", JSON.parse(retrievedObject));\n    console.log(this.state.credits);\n    Axios.get(\"http://localhost:3001/bid\").then(result => {\n      this.setState({\n        isLoaded: true,\n        bid: result.data\n      }, () => {\n        for (var i = 0; i < result.data.length; i++) {\n          if (\"/bid/\" + result.data[i]._id === window.location.pathname) {\n            this.setState({\n              currentBid: result.data[i],\n              credits: retrievedObject.credits\n            });\n          }\n        }\n      });\n    }, error => {\n      this.setState({\n        isLoaded: true,\n        error\n      });\n    });\n  } // getUser() {\n  //   Axios.get('http://localhost:3001/user').then(response => {\n  //     console.log(response.data);\n  //     if (response.data.user) {\n  //       console.log('Get User: There is a user saved in the server session: ');\n  //       this.setState({\n  //         loggedIn: true,\n  //         username: response.data.user.username,\n  //         credits: response.data.user.credits\n  //       })\n  //     } else {\n  //       console.log('Get user: no user');\n  //       this.setState({\n  //         loggedIn: false,\n  //         username: null\n  //       });\n  //     };\n  //   });\n  // };\n\n\n  handleSubmit(event) {\n    event.preventDefault();\n    Axios.put('http://localhost:3001/user', {\n      credits: this.state.credits - this.state.bidAmount\n    }).then(response => {\n      console.log(response);\n      console.log(\"Wager Placed!\");\n      this.setState({\n        redirectTo: '/'\n      });\n    }).catch(error => {\n      console.log('login error: ');\n      console.log(error);\n    });\n    Axios.put('http://localhost:3001/bid', {\n      teamOneBidAmount: this.state.bidAmount,\n      teamOneBettorId: this.state.username,\n      betPlaced: true\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          bid = _this$state.bid,\n          isLoaded = _this$state.isLoaded,\n          loggedIn = _this$state.loggedIn,\n          credits = _this$state.credits,\n          bidAmount = _this$state.bidAmount,\n          currentBid = _this$state.currentBid;\n\n    if (!isLoaded) {\n      return React.createElement(Spinner, {\n        animation: \"grow\",\n        variant: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(Col, {\n        md: {\n          span: 6,\n          offset: 3\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: \"jawn\",\n        bg: \"dark\",\n        text: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Card.Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Credits: \", this.state.credits), React.createElement(Card.Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Betting Ticket\"), React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, this.state.currentBid.teamOneName, \" vs \", this.state.currentBid.teamTwoName), React.createElement(Card.Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Time: \", moment(new Date(parseInt(this.state.currentBid.commencementTime * 1000))).format('MMMM Do YYYY, h:mm a')), React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Bid Amount\"), React.createElement(Form.Control, {\n        type: \"awayBidAmount\",\n        placeholder: \"$0\",\n        id: \"awayBidAmount\",\n        name: \"awayBidAmount\",\n        value: this.state.bidAmount,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(Button, {\n        onClick: this.handleSubmit,\n        variant: \"warning\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Submit Away Bet\"), React.createElement(Form.Control, {\n        type: \"homeBidAmount\",\n        placeholder: \"$0\",\n        id: \"homeBidAmount\",\n        name: \"homeBidAmount\",\n        value: this.state.bidAmount,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), React.createElement(Button, {\n        onClick: this.handleSubmit,\n        variant: \"warning\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Submit Home Bet\"))));\n    }\n\n    ;\n  }\n\n}\n\n;\nexport default GamePage;","map":{"version":3,"sources":["C:\\Users\\dalan\\DemoDownload\\project3\\client\\src\\components\\game.js"],"names":["React","Card","Button","moment","Axios","Col","Form","Spinner","BrowserRouter","GamePage","Component","constructor","props","state","bid","bidamount","undefined","isLoaded","credits","currentBid","loggedIn","componentDidMount","getUser","retrievedObject","localStorage","getItem","console","log","JSON","parse","get","then","result","setState","data","i","length","_id","window","location","pathname","error","handleSubmit","event","preventDefault","put","bidAmount","response","redirectTo","catch","teamOneBidAmount","teamOneBettorId","username","betPlaced","render","span","offset","teamOneName","teamTwoName","Date","parseInt","commencementTime","format","handleChange"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport moment from 'moment';\nimport Axios from \"axios\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from \"react-bootstrap/Form\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport { BrowserRouter } from 'react-router-dom';\n\nclass GamePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bid: {},\n      bidamount: undefined,\n      isLoaded: false,\n      credits: null,\n      currentBid: {},\n      loggedIn: undefined\n    }\n  }\n  componentDidMount() {\n    this.getUser();\n    var retrievedObject = localStorage.getItem(\"userObject\");\n    console.log(\"retrievedObject\", JSON.parse(retrievedObject));\n   \n    console.log(this.state.credits)\n    Axios.get(\"http://localhost:3001/bid\")\n      .then((result) => {\n        this.setState({\n          isLoaded: true,\n          bid: result.data\n        },() => {\n          for (var i = 0; i < result.data.length; i++) {\n            if ((\"/bid/\" + result.data[i]._id) === window.location.pathname) {\n              this.setState({\n                currentBid: result.data[i],\n                credits: retrievedObject.credits\n              })\n              \n            }\n          }\n        });\n      },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        });\n  }\n\n  // getUser() {\n  //   Axios.get('http://localhost:3001/user').then(response => {\n  //     console.log(response.data);\n  //     if (response.data.user) {\n  //       console.log('Get User: There is a user saved in the server session: ');\n  //       this.setState({\n  //         loggedIn: true,\n  //         username: response.data.user.username,\n  //         credits: response.data.user.credits\n  //       })\n  //     } else {\n  //       console.log('Get user: no user');\n  //       this.setState({\n  //         loggedIn: false,\n  //         username: null\n  //       });\n  //     };\n  //   });\n  // };\n  handleSubmit(event) {\n    event.preventDefault()\n    Axios\n      .put('http://localhost:3001/user', {\n       credits: (this.state.credits - this.state.bidAmount)\n      })\n      .then(response => {\n          console.log(response)\n          console.log(\"Wager Placed!\")\n          this.setState({\n            redirectTo: '/'\n          })\n      }).catch(error => {\n        console.log('login error: ')\n        console.log(error);\n      });\n      \n      Axios.put('http://localhost:3001/bid', {\n        teamOneBidAmount: this.state.bidAmount,\n        teamOneBettorId: this.state.username,\n        betPlaced: true\n      })\n  };\n  render() {\n\n    const { bid, isLoaded, loggedIn, credits, bidAmount, currentBid } = this.state;\n    \n\n    \n    if (!isLoaded) {\n      return <Spinner animation=\"grow\" variant=\"warning\" />\n    } else {\n      return (\n\n        <Col md={{ span: 6, offset: 3 }}>\n          <Card className=\"jawn\" bg=\"dark\" text=\"white\">\n            <Card.Text>Credits: {this.state.credits}</Card.Text>\n            <Card.Text>Betting Ticket</Card.Text>\n            <Card.Body>\n              <Card.Title>{this.state.currentBid.teamOneName} vs {this.state.currentBid.teamTwoName}</Card.Title>\n\n              <Card.Text>\n                Time: {moment(new Date(parseInt(this.state.currentBid.commencementTime * 1000))).format('MMMM Do YYYY, h:mm a')}\n              </Card.Text>\n              \n              <Form.Label>Bid Amount</Form.Label>\n              <Form.Control\n                type=\"awayBidAmount\"\n                placeholder=\"$0\"\n                id=\"awayBidAmount\"\n                name=\"awayBidAmount\"\n                value={this.state.bidAmount}\n                onChange={this.handleChange} />\n              <Button onClick={this.handleSubmit} variant=\"warning\" type=\"submit\">\n                Submit Away Bet\n  \t\t\t\t\t\t</Button>\n              <Form.Control\n                type=\"homeBidAmount\"\n                placeholder=\"$0\"\n                id=\"homeBidAmount\"\n                name=\"homeBidAmount\"\n                value={this.state.bidAmount}\n                onChange={this.handleChange} />\n              <Button onClick={this.handleSubmit} variant=\"warning\" type=\"submit\">\n                Submit Home Bet\n  \t\t\t\t\t\t</Button>\n              \n\n            </Card.Body>\n          </Card>\n        </Col>\n      );\n    };\n  };\n};\nexport default GamePage;"]},"metadata":{},"sourceType":"module"}