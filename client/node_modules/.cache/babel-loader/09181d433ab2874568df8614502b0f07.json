{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dalan\\\\DemoDownload\\\\project3\\\\client\\\\src\\\\components\\\\login-form.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\n\nclass LoginForm extends Component {\n  constructor() {\n    super();\n    this.state = {\n      username: '',\n      password: '',\n      loggedIn: false,\n      redirectTo: null,\n      credits: undefined\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    console.log('handleSubmit');\n    var userObject = {\n      username: this.state.username,\n      password: this.state.password\n    };\n    axios.post('http://localhost:3001/user/login', userObject).then(response => {\n      console.log('login response: ');\n      console.log(response);\n\n      if (response.status === 200) {\n        // update App.js state\n        this.props.updateUser({\n          loggedIn: true,\n          username: response.data.username,\n          credits: response.data.credits\n        });\n        console.log(this.props.credits); // update the state to redirect to home\n\n        this.setState({\n          redirectTo: '/'\n        }, () => {\n          var userObject = {\n            username: this.state.username,\n            password: this.state.password,\n            credits: this.props.credits,\n            loggedIn: this.state.loggedIn\n          };\n          localStorage.setItem('userObject', JSON.stringify(userObject));\n        });\n      } else {\n        this.setState({\n          redirectTo: '/signup'\n        });\n      }\n    }).catch(error => {\n      console.log('login error: ');\n      console.log(error);\n    });\n  }\n\n  render() {\n    if (this.state.redirectTo) {\n      return React.createElement(Redirect, {\n        to: {\n          pathname: this.state.redirectTo\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Card, {\n        bg: \"dark\",\n        text: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Login Page\")), React.createElement(Form.Group, {\n        controlId: \"formBasicEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Email address\"), React.createElement(Form.Control, {\n        type: \"username\",\n        placeholder: \"Enter email\",\n        id: \"username\",\n        name: \"username\",\n        value: this.state.username,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Form.Control, {\n        placeholder: \"Password\",\n        type: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        onClick: this.handleSubmit,\n        variant: \"dark\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Submit\")));\n    }\n\n    ;\n  }\n\n}\n\n;\nexport default LoginForm;","map":{"version":3,"sources":["C:\\Users\\dalan\\DemoDownload\\project3\\client\\src\\components\\login-form.js"],"names":["React","Component","Redirect","axios","Form","Col","Button","Card","LoginForm","constructor","state","username","password","loggedIn","redirectTo","credits","undefined","handleSubmit","bind","handleChange","event","setState","target","name","value","preventDefault","console","log","userObject","post","then","response","status","props","updateUser","data","localStorage","setItem","JSON","stringify","catch","error","render","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card'\n\nclass LoginForm extends Component {\n    constructor() {\n        super()\n        this.state = {\n            username: '',\n            password: '',\n            loggedIn: false,\n            redirectTo: null,\n            credits: undefined\n        }\n        this.handleSubmit = this.handleSubmit.bind(this)\n        this.handleChange = this.handleChange.bind(this)\n    };\n\n    handleChange(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    };\n\n    handleSubmit(event) {\n        event.preventDefault()\n        console.log('handleSubmit')\n        var userObject = {\n            username: this.state.username,\n            password: this.state.password\n        };\n        axios\n            .post('http://localhost:3001/user/login', userObject)\n            .then(response => {\n                console.log('login response: ')\n                console.log(response)\n                if (response.status === 200) {\n                    // update App.js state\n                    this.props.updateUser({\n                        loggedIn: true,\n                        username: response.data.username,\n                        credits: response.data.credits\n                    })\n                    console.log(this.props.credits)\n                    // update the state to redirect to home\n                    this.setState({\n                        redirectTo: '/'\n                    }, () => {\n                        var userObject = {\n                            username: this.state.username,\n                            password: this.state.password,\n                            credits: this.props.credits,\n                            loggedIn: this.state.loggedIn\n                        }\n                        localStorage.setItem('userObject', JSON.stringify(userObject))\n                    })\n                }\n                else {\n                    this.setState({\n                        redirectTo: '/signup'\n                    })\n                }\n            }).catch(error => {\n                console.log('login error: ')\n                console.log(error);\n            });\n    };\n\n    render() {\n        if (this.state.redirectTo) {\n            return <Redirect to={{ pathname: this.state.redirectTo }} />\n        } else {\n            return (\n                <div>\n                    <Form>\n                        <Col sm={5}>\n                        <Card bg=\"dark\" text=\"white\">\n                                <Card.Title>\n                                    Login Page\n                                </Card.Title>\n                            </Card>\n                            <Form.Group controlId=\"formBasicEmail\">\n                                <Form.Label>Email address</Form.Label>\n                                <Form.Control\n                                    type=\"username\"\n                                    placeholder=\"Enter email\"\n                                    id=\"username\"\n                                    name=\"username\"\n                                    value={this.state.username}\n                                    onChange={this.handleChange} />\n                            </Form.Group>\n\n                            <Form.Group controlId=\"formBasicPassword\">\n                                <Form.Label>Password</Form.Label>\n                                <Form.Control\n                                    placeholder=\"Password\"\n                                    type=\"password\"\n                                    name=\"password\"\n                                    value={this.state.password}\n                                    onChange={this.handleChange}\n                                />\n                            </Form.Group>\n                        </Col>\n                        <Button onClick={this.handleSubmit} variant=\"dark\" type=\"submit\">\n                            Submit\n  \t\t\t\t\t\t</Button>\n                    </Form>\n                </div>\n            );\n        };\n    };\n};\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}